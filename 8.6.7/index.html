<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FCM Cloud Messaging</title>
</head>

<body>
    <div id="token"></div>
    <script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.7/firebase-messaging.js"></script>
    <script>
        TokenShow = document.getElementById("token");
        // นำค่า Config ที่ Copy ไว้ในตอนแรก มาวางทีนี่
        var firebaseConfig = {
            apiKey: "<< apiKey >>",
            authDomain: "<< authDomain >>",
            projectId: "<< projectId >>",
            storageBucket: "<< storageBucket >>",
            messagingSenderId: "<< messagingSenderId >>",
            appId: "<< appId >>"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);

        const messaging = firebase.messaging();

        messaging.requestPermission().then(function () {

            console.log("Notification permission granted.");

            // get the token in the form of promise
            return messaging.getToken();

        }).then(function (token) {

            //สามารถนำ token ไปใช้สำหรับ ส่ง Push
            TokenShow.innerHTML = token;

        }).catch(function (err) {

            console.log(err);
        });

    </script>

</body>

</html>